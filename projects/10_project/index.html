<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Scene using various shaders | Ferenc Gozony </title> <meta name="author" content="Ferenc Gozony"> <meta name="description" content="Grass Vertex Shader (ShaderGraph), Cel Shader (ShaderGraph), and Pixelated Post-Processing Shader (HLSL)"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://cisc0-gif.github.io/projects/10_project/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ferenc</span> Gozony </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/papers/">Papers </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Scene using various shaders</h1> <p class="post-description">Grass Vertex Shader (ShaderGraph), Cel Shader (ShaderGraph), and Pixelated Post-Processing Shader (HLSL)</p> </header> <article> <p>A small project created in Unity (URP 2022) for my Advanced Unity Programming course (GDIM 33). All models were created in Blender.</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/TOUCV7deUA0?si=j7zkpcR76VWBPa82" title="YouTube video player" frameborder="0" align="center" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe> <p>As there are too many files to realistically include, please see below for the shaders README files instead. Code availabe upon request.</p> <p>CelShaderAdditional_README.txt</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cel-Shader with Additional World Lighting Support (CelShaderAdditional.shadergraph)

This shader works in Unity 2021.3+ and URP.

Dependencies:
-CalcAdditionalDiffuse.shadersubgraph (Returns diffused "Diffuse" light scattered from surfaces hit by additional light sources)
-CalcAdditionalSpecular.shadersubgraph (Returns reflective "Specular" light from additional light sources)
-GetMainLight.shadersubgraph (Gets lighting values from Main Skybox light source)
-GetAdditionalLight.shadersubgraph (Gets lighting values from Additional light sources)
-Lighting.hlsl (Provides abstracted functions for GetMainLight and GetAdditionalLight)

There are 3 main attributes calculated in this Unlit shader to display realistic lighting upon abstracted textures and colors: 

-Diffuse light
-Specular light
-Fresnel effect

Along with 9 Parameters to tweak Diffuse, Specular, and Fresnel additives to the output:

-Ambient Strength = "Glow" multiple that determines how much Ambient Light is emitted from material surface (Manually "Lit" Shader)
-Diffuse Color = Color of light that is "Diffused" when light hits material surface
-Diffuse Texture = Normal map texture for diffused light
-Specular Color = Color of light that is reflected off material surface
-Fresnel Color = Color of light that is seen on muted colors of material surface
-Fresnel Size = Power factor of Fresnel light
-Lighting Cutoff = Determines how harsh the cutoff is between Light and Shadow on material surface
-Falloff Amount = How much "bleed" you want between Light and Shadow
-Smoothness = Reflectiveness of material surface (used alongside "Ambient Strength" var for Shiny effect)

Diffuse Calculations:

	1. Get object's current world position
	2. Get MainLight values currently interacting with object
	3. Find "Dot Product" (directional growth of one vector to another) of light data and Normalized world vector
		4. Multiply by Light Attentuation
			5.Multiply by Light Color
	6. Saturate (return value clamped between 0 and 1)
	7. Add Diffuse values from Additional light sources (CalcAdditionalDiffuse)
	8. Perform a series of calculations held within the bounds of "Lighting Cutoff", "Falloff Amount", "Diffuse Color", "Ambient Strength", and
	   "Diffuse Texture" vars to display stark contrast between light and dark shadows (Giving it the "Cel-Shaded" effect).

Specular Calculations:

	1. Get object's current world position
	2. Get MainLight values currently interacting with object
	3. Add direction to mainLight data and normalize within Object Space
	4. Get Dot Product of Normalized World Vector and Object Space
	5. Saturate (return value clamped between 0 and 1)
	6. Multiply by Power of "Smoothness" value to add light "refraction"/shiny effect
		7. Multiply by Light Attenuation
			8. Multiply by Light Color
	9. Multiply by Saturated Diffuse light so values aren't drastically extreme from one another
	10. Add Specular values from Additional Light Sources (CalcAdditionalSpecular)
	11. Perform a series of calculations held within the bounds of "Lighting Cutoff", "Falloff Amount", and "Specular Color" to intensify specular
		light for more dramatic light reflections (Giving Light sources "White Dot" reflection on material surface).

Fesnel Calculations:

	1. Get Reciprocal of "Fresnel Size" var (divide 1 by var)
	2. Add "Fresnel Effect" ("differing reflectance on a surface depending on viewing angle") and multiply its effect by power of Reciprocal
	3. Multiply by Saturated Diffuse light so vlaues aren't drastically extreme from one another
	4. Perform a series of calculations held within the bounds of "Lighting Cutoff", "Falloff Amount", and "Fresnel Color" to display stark contrast
	   between light and dark values on surface border (Giving "Cresting Light" appearance on material surface).

Now all calculations are added together, Fog density is added and color is blended to output to apply "Atmospheric Fog" affect based on world 
position from camera so material doesn't stick out in scene.

*NOTE*: My other shader "GrassCelShaderAdditional" copies this shader EXACTLY but simply applies Gaussian noise to UV vertex at base 
        (by Lerping current world position towards guassian noise by Y value so bottom of mesh UVs isn't affected) to create wind affect. 
		Before Cel-Shading this shader was nothing more than texture and color vars and the vertex movement noise which makes it a very
		simple basis for simulating natural movement upon Shaders.
</code></pre></div></div> <p>PixelizedShader_README.txt</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Pixelated Post-Processing Shader (Pixelize.shader)

This shader works in Unity 2021.3+ and URP.

First off, this shader works by being added as a Renderer Feature to the Scriptable Render Pipeline (SRP) through a ScriptableRenderPass class and is thus,
added in Post-Process. This is done through the subsequent "PixelizePass.cs" and "PixelizeFeature.cs" C# scripts.

Then, working in Pixelize.shader (the actual HLSL shader), the shader takes in its required "_MainTex" texture and defines three variables: "_BlockCount",
"_BlockSize", and "_HalfBlockSize".

- "_BlockCount" = how many pixelated "blocks" will appear per pixel
- "_BlockSize" = how large/how many pixels each "block" will cover
- "_HalfBlockSize" = Gets half of block size to find center to write on specified pixel

Each on-screen pixel's pos and uv is input to the "Varyings" struct and then input to the fragmentation function to divide each pixel UV within each block 
to the "Pixelation" Render Pass (which uses the Renderer Feature to write to the on-screen data).

Pixel UVs are multiplied by the _BlockCount variable and then input to the floor() function to get each block position, which is stored in the "blockPos" var.
The center of each block is calculated by first multiplying (blockPos x _BlockSize) and then adding _HalfBlockSize to locate each block's center.
Then the texture at each block center is sampled using SAMPLE_TEXTURE2D() and passed to the _MainTex with the sampler_point_clamp SamplerState using
each blockCenter position.

Lastly, the textures passed to _MainTex at each block center is returned to be sent to the Renderer Pipeline.
</code></pre></div></div> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Ferenc Gozony. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>